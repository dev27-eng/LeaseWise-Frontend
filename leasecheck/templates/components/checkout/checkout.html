{% extends "components/base_component.html" %}

{% set component_name = 'checkout' %}
{% set component_title = 'Checkout' %}
{% set header_title = 'Complete Your Purchase' %}

{% block component_content %}
<div class="checkout-container">
    <!-- Plan Details Section -->
    <div class="plan-details">
        <h2>Selected Plan</h2>
        <div class="plan-card">
            <h3>{{ plan.name }}</h3>
            <div class="price">${{ "%.2f"|format(plan.price) }}</div>
            <ul class="features-list">
                {% for feature in plan.features %}
                <li>{{ feature }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- Payment Form Section -->
    <div class="payment-section">
        <h2>Payment Details</h2>
        <form id="payment-form" class="payment-form">
            <div class="form-group">
                <label for="card-name">Name on Card</label>
                <input type="text" id="card-name" required>
            </div>
            
            <div class="form-group">
                <label for="card-number">Card Number</label>
                <input type="text" id="card-number" required pattern="[0-9]{16}" placeholder="1234 5678 9012 3456">
            </div>

            <div class="form-row">
                <div class="form-group half">
                    <label for="card-expiry">Expiry Date</label>
                    <input type="text" id="card-expiry" required pattern="[0-9]{2}/[0-9]{2}" placeholder="MM/YY">
                </div>
                
                <div class="form-group half">
                    <label for="card-cvc">CVC</label>
                    <input type="text" id="card-cvc" required pattern="[0-9]{3,4}" placeholder="123">
                </div>
            </div>

            <div id="card-errors" class="error-message" role="alert"></div>

            <div class="action-buttons">
                <button type="submit" class="submit-button">Pay ${{ "%.2f"|format(plan.price) }}</button>
                <a href="{{ url_for('main.preview_component', component_name='select_plan') }}" class="return-button">Return to Plans</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='components/checkout/checkout.js') }}" defer></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='components/checkout/checkout.css') }}">
{% endblock %}
