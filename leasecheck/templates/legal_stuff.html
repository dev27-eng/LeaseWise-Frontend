{% extends "base.html" %}

{% block title %}Legal Stuff - LeaseCheck{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/legal_stuff.css') }}">
{% endblock %}

{% block content %}
<div class="legal-stuff-screen">
    <!-- Green header -->
    <header class="legal-header">
        <h1>Legal Stuff</h1>
    </header>

    <main class="legal-content">
        <div class="legal-container">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="flash-message {{ category }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <h2 class="welcome-text">Hey there! Welcome to Lease Check.</h2>
            
            <div class="explanation-text">
                <p>We're excited to help you navigate your lease agreements with ease. Before you get started, we want to make sure you're aware of a few important things:</p>
                
                <h3>What You Need to Know</h3>
                
                <p><strong>Terms of Service:</strong> These are the rules and guidelines for using our app. They cover everything from how you can use Lease Check to what you can expect from us.</p>
                
                <p><strong>Disclaimer:</strong> This explains the limitations of our service. While we strive to provide accurate and helpful information, it's not a substitute for professional legal advice.</p>
                
                <p><strong>Refund Policy:</strong> Learn about our policies regarding refunds for our services. We want to ensure you're satisfied with your experience.</p>
                
                <h3>Why It Matters</h3>
                <p>Understanding these documents helps ensure that everyone has a clear and positive experience with Lease Check. It's all about keeping things transparent and straightforward for you.</p>
                
                <h3>Got Questions?</h3>
                <p>If anything's unclear or you need more info, don't hesitate to reach out to us at <a href="mailto:support@coloradoleasecheck.com">support@coloradoleasecheck.com</a>. We're here to help!</p>
                
                <h3>Ready to Dive In?</h3>
                <p>Please review our Terms of Service, Disclaimer, and Refund Policy to get started.</p>
            </div>

            <div class="legal-links">
                <a href="{{ url_for('terms_of_service') }}" target="_blank" rel="noopener noreferrer">Terms Of Service</a>
                <a href="{{ url_for('legal_disclaimer') }}" target="_blank" rel="noopener noreferrer">Legal Disclaimer</a>
                <a href="{{ url_for('refund_policy') }}" target="_blank" rel="noopener noreferrer">Refund Policy</a>
            </div>

            <form method="POST" class="terms-form" id="termsForm" novalidate>
                {{ form.csrf_token }}
                <div class="terms-checkbox">
                    {{ form.accept_terms(required=true) }}
                    <label for="accept_terms">I have read and accept the Terms of Service, Legal Disclaimer, and Refund Policy</label>
                    {% if form.accept_terms.errors %}
                        <div class="error-message">
                            {% for error in form.accept_terms.errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                <div class="legal-actions">
                    <a href="{{ url_for('terms_declined') }}" class="reject-btn">Reject</a>
                    <button type="submit" class="accept-btn">Accept</button>
                </div>
            </form>
        </div>
    </main>
</div>

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('termsForm');
    const checkbox = document.getElementById('accept_terms');
    const submitBtn = form.querySelector('.accept-btn');
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    
    form.addEventListener('submit', function(e) {
        if (!checkbox.checked) {
            e.preventDefault();
            errorDiv.innerHTML = '<p>You must accept the terms to continue</p>';
            if (!document.querySelector('.error-message')) {
                checkbox.parentNode.appendChild(errorDiv);
            }
            checkbox.focus();
        }
    });

    checkbox.addEventListener('change', function() {
        if (checkbox.checked && document.querySelector('.error-message')) {
            document.querySelector('.error-message').remove();
        }
    });
});
</script>
{% endblock %}
{% endblock %}
