{% extends "base.html" %}

{% block title %}Local Attorneys - LeaseCheck{% endblock %}

{% block extra_css %}
<style>
    .attorneys-container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
    }

    .green-header {
        background-color: #7ED321;
        padding: 20px;
        text-align: center;
        margin-bottom: 30px;
        border-radius: 10px;
    }

    .green-header h1 {
        color: black;
        margin: 0;
        font-size: 2.5rem;
        font-weight: bold;
    }

    .search-section {
        margin-bottom: 30px;
        text-align: center;
    }

    .search-box {
        display: flex;
        max-width: 600px;
        margin: 20px auto;
        gap: 10px;
    }

    .search-input {
        flex: 1;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
    }

    .search-btn {
        background-color: #7ED321;
        color: black;
        border: none;
        padding: 0 20px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
    }

    .attorneys-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .attorney-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease;
    }

    .attorney-card:hover {
        transform: translateY(-5px);
    }

    .attorney-photo {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        margin: 0 auto 15px;
        background-color: #f0f0f0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 40px;
        color: #666;
    }

    .attorney-name {
        font-size: 1.2rem;
        font-weight: 500;
        margin-bottom: 10px;
        text-align: center;
    }

    .attorney-specialty {
        color: #666;
        margin-bottom: 15px;
        text-align: center;
    }

    .attorney-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-bottom: 15px;
        text-align: center;
    }

    .stat-item {
        background-color: #f8f9fa;
        padding: 8px;
        border-radius: 5px;
    }

    .stat-label {
        font-size: 12px;
        color: #666;
    }

    .stat-value {
        font-weight: 500;
        color: #333;
    }

    .contact-btn {
        width: 100%;
        background-color: #7ED321;
        color: black;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 500;
        transition: background-color 0.2s ease;
    }

    .contact-btn:hover {
        background-color: #6db91d;
    }

    .no-results {
        text-align: center;
        padding: 40px;
        background: #f8f9fa;
        border-radius: 10px;
        margin-top: 20px;
    }

    @media (max-width: 768px) {
        .attorneys-container {
            padding: 10px;
        }

        .green-header h1 {
            font-size: 2rem;
        }

        .search-box {
            flex-direction: column;
        }

        .search-btn {
            padding: 12px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="attorneys-container">
    <header class="green-header">
        <h1>Local Attorneys</h1>
    </header>

    <section class="search-section">
        <div class="search-box">
            <input type="text" class="search-input" placeholder="Enter your location" id="locationInput">
            <button class="search-btn" onclick="searchAttorneys()">Find Attorneys</button>
        </div>
    </section>

    <div class="attorneys-grid" id="attorneysGrid">
        <!-- Attorney cards will be dynamically inserted here -->
    </div>

    <div class="no-results" id="noResults" style="display: none;">
        <h2>No Attorneys Found</h2>
        <p>Try searching in a different location or expanding your search radius.</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
const mockAttorneys = [
    {
        name: "Sarah Johnson",
        specialty: "Real Estate Law",
        experience: "15 years",
        rating: 4.8,
        cases: 250,
        success: "95%"
    },
    {
        name: "Michael Chen",
        specialty: "Property Law",
        experience: "12 years",
        rating: 4.9,
        cases: 180,
        success: "92%"
    },
    {
        name: "Emily Rodriguez",
        specialty: "Housing Law",
        experience: "8 years",
        rating: 4.7,
        cases: 120,
        success: "90%"
    }
];

function searchAttorneys() {
    const location = document.getElementById('locationInput').value;
    const grid = document.getElementById('attorneysGrid');
    const noResults = document.getElementById('noResults');

    // Clear existing results
    grid.innerHTML = '';

    if (location.trim() === '') {
        noResults.style.display = 'block';
        return;
    }

    // For demo purposes, always show mock attorneys
    mockAttorneys.forEach(attorney => {
        const card = createAttorneyCard(attorney);
        grid.appendChild(card);
    });

    noResults.style.display = mockAttorneys.length === 0 ? 'block' : 'none';
}

function createAttorneyCard(attorney) {
    const card = document.createElement('div');
    card.className = 'attorney-card';
    
    card.innerHTML = `
        <div class="attorney-photo">ðŸ‘¤</div>
        <h3 class="attorney-name">${attorney.name}</h3>
        <div class="attorney-specialty">${attorney.specialty}</div>
        <div class="attorney-stats">
            <div class="stat-item">
                <div class="stat-label">Experience</div>
                <div class="stat-value">${attorney.experience}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Rating</div>
                <div class="stat-value">${attorney.rating}/5</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Cases</div>
                <div class="stat-value">${attorney.cases}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Success Rate</div>
                <div class="stat-value">${attorney.success}</div>
            </div>
        </div>
        <button class="contact-btn" onclick="contactAttorney('${attorney.name}')">Contact Attorney</button>
    `;
    
    return card;
}

function contactAttorney(attorneyName) {
    // Store attorney name in session storage for the acknowledgment page
    sessionStorage.setItem('selectedAttorney', attorneyName);
    window.location.href = "{{ url_for('main.lawyer_message_acknowledgment') }}";
}

// Initialize with a default search when the page loads
document.addEventListener('DOMContentLoaded', searchAttorneys);
</script>
{% endblock %}
